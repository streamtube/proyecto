<!doctype html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <title>Search</title>
</head>
<body>
<div id="buttons">
    <label>
        <input id="query" value='cats' type="text"/>
        <button id="search-button" disabled onclick="clearBox('#search-container'), clearBox('#video'), searchGET()">Search</button>
        <button onclick="clearBox('#search-container'), clearBox('#video')">Borrar</button>
    </label>
</div>
<div id="search-container">
</div>
<div id="video"></div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
    /*global gapi*/

    // After the API loads, call a function to enable the search box.
    function handleAPILoaded() {
        $('#search-button').attr('disabled', false);
    }

    // Search for a specified string.
    function search() {
        var q = $('#query').val();
        var request = gapi.client.youtube.search.list({
            q: q,
            part: 'snippet'
        });

        request.execute(function(response) {
            var str = JSON.stringify(response.result);
            $('#search-container').html('<pre>' + str + '</pre>');
        });
    }
    // Search for a specified string.
    function searchGET() {
        var q = $('#query').val();

        var url = "https://www.googleapis.com/youtube/v3/search?part=snippet&q="+q+"&key=AIzaSyAMM2O1jubIbmRfjuW_Hghsuvtcm2zGoTM";

        $.get(url, function(response) {
            var size = response.items.length;


            for (var i = 0; i < size; i++) {
                video = response.items[i];
                videoYT = video.id.videoId;
                var img = $('<img onclick = "clearBox(\'#video\'), showVideo(videoYT)">');
                img.attr('src', video.snippet.thumbnails.default.url);
                img.appendTo('#search-container');
                //var playVideo = $('<iframe width="640" height="390" frameborder="0" style="visibility: visible;display: block" id="video-youtube" allowfullscreen="1" title="YouTube video player"/>').attr('src', "https://www.youtube.com/embed/"+videoYT).appendTo('#video');
            }
            //var str = JSON.stringify(response);
            //$('#search-container').html('<pre>' + str + '</pre>');
        });
    }



    function showVideo(video){
        $('<iframe width="640" height="390" frameborder="0" style="visibility: visible;display: block" id="video-youtube" allowfullscreen="1" title="YouTube video player"/>').attr('src', "https://www.youtube.com/embed/"+video).appendTo('#video');
        console.log(videoYT);
    }

    function clearBox(element)
    {
        $(element).empty();
    }

</script>
<script src="//apis.google.com/js/client.js?onload=handleAPILoaded"></script>
</body>
</html>